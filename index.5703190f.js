function e(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=i.parcelRequired7fa;function a(e){return Math.round(e)}function l(e){return Math.floor(e)}function s(e){return Math.abs(e)}function d(e,t){return Math.min(e,t)}function u(e){return Math.cos(e)}function h(e){return Math.sin(e)}function c(e,t){return Math.pow(e,t)}function y(e){return document.getElementById(e)}null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},i.parcelRequired7fa=o),o.register("dRo73",(function(t,i){var n,r;e(t.exports,"register",(()=>n),(e=>n=e)),e(t.exports,"resolve",(()=>r),(e=>r=e));var o={};n=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)o[t[i]]=e[t[i]]},r=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("dRo73").register(JSON.parse('{"1MGML":"index.5703190f.js","fnLwo":"texture.3a68c72f.png"}'));const p=Math.PI;var f;f=JSON.parse('{"frames":{"boss":{"frame":{"x":0,"y":0,"w":28,"h":38},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":28,"h":38},"sourceSize":{"w":28,"h":38},"pivot":{"x":0.5,"y":0.5}},"boss2":{"frame":{"x":28,"y":0,"w":29,"h":38},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":29,"h":38},"sourceSize":{"w":29,"h":38},"pivot":{"x":0.5,"y":0.5}},"shield":{"frame":{"x":0,"y":38,"w":28,"h":28},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":28,"h":28},"sourceSize":{"w":28,"h":28},"pivot":{"x":0.5,"y":0.5}},"cerbere":{"frame":{"x":28,"y":38,"w":20,"h":17},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":20,"h":17},"sourceSize":{"w":20,"h":17},"pivot":{"x":0.5,"y":0.5}},"cerbere2":{"frame":{"x":57,"y":0,"w":20,"h":18},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":20,"h":18},"sourceSize":{"w":20,"h":18},"pivot":{"x":0.5,"y":0.5}},"basic_cobble":{"frame":{"x":57,"y":18,"w":16,"h":16},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":16,"h":16},"sourceSize":{"w":16,"h":16},"pivot":{"x":0.5,"y":0.5}},"border2":{"frame":{"x":28,"y":55,"w":16,"h":11},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":5,"w":16,"h":11},"sourceSize":{"w":16,"h":16},"pivot":{"x":0.5,"y":0.5}},"zombie":{"frame":{"x":57,"y":34,"w":11,"h":16},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":11,"h":16},"sourceSize":{"w":11,"h":16},"pivot":{"x":0.5,"y":0.5}},"basic_cobble2":{"frame":{"x":48,"y":50,"w":16,"h":16},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":16,"h":16},"sourceSize":{"w":16,"h":16},"pivot":{"x":0.5,"y":0.5}},"vertical_laser":{"frame":{"x":64,"y":50,"w":7,"h":16},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":7,"h":16},"sourceSize":{"w":7,"h":16},"pivot":{"x":0.5,"y":0.5}},"skeleton":{"frame":{"x":0,"y":66,"w":13,"h":16},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1,"y":0,"w":13,"h":16},"sourceSize":{"w":15,"h":16},"pivot":{"x":0.5,"y":0.5}},"friendly_vertical_laser":{"frame":{"x":68,"y":34,"w":7,"h":16},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":7,"h":16},"sourceSize":{"w":7,"h":16},"pivot":{"x":0.5,"y":0.5}},"imp":{"frame":{"x":13,"y":66,"w":10,"h":16},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":10,"h":16},"sourceSize":{"w":10,"h":16},"pivot":{"x":0.5,"y":0.5}},"border1":{"frame":{"x":23,"y":66,"w":16,"h":14},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":0,"y":2,"w":16,"h":14},"sourceSize":{"w":16,"h":16},"pivot":{"x":0.5,"y":0.5}},"floating_eye":{"frame":{"x":39,"y":66,"w":14,"h":13},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":14,"h":13},"sourceSize":{"w":14,"h":13},"pivot":{"x":0.5,"y":0.5}},"friendly_bullet":{"frame":{"x":71,"y":50,"w":5,"h":5},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":5,"h":5},"sourceSize":{"w":5,"h":5},"pivot":{"x":0.5,"y":0.5}},"enemie_bullet":{"frame":{"x":71,"y":55,"w":5,"h":5},"rotated":false,"trimmed":false,"spriteSourceSize":{"x":0,"y":0,"w":5,"h":5},"sourceSize":{"w":5,"h":5},"pivot":{"x":0.5,"y":0.5}}},"meta":{"app":"http://free-tex-packer.com","version":"0.6.7","image":"texture.png","format":"RGBA8888","size":{"w":77,"h":82},"scale":1}}');var m;m=new URL(o("dRo73").resolve("fnLwo"),import.meta.url).toString();const x={debug:!1,collision:!0,width:1200,height:576,worldWidth:400,worldHeight:192,tileSize:16,worldTileWidth:25,worldTileHeight:12,playerSpeedX:100,playerSpeedY:100,playerWidth:16,playerHeight:15,playerOx:2,playerOy:2,playerBulletSpeedX:200,playerBulletSpeedY:100,playerBulletsPoolSize:200,playerSprayOpen:1.2,playerBulletWidth:3,playerBulletHeight:3,playerInvincibleTime:1,playerBlinkPeriod:.05,playerAnimationTime:.2,playerShootF:1,enemyWidth:13,enemyHeight:16,enemyOx:0,enemyOy:0,enemyBulletSpeedX:50,enemyBulletSpeedY:50,enemyBulletsPoolSize:50,enemyShootFrequency:1.3,enemyBulletPoolSize:1e3,enemySprayOpen:1,bossWidth:22,bossHeight:33,bossOx:6,bossOy:3,bossSpeed:75,bossBulletSpeedX:75,bossBulletSpeedY:100,bossBulletsPoolSize:200,bossBigBulletWidth:25,bossBigBulletHeight:25,bossBigBulletExplosionTick:200,bossPatternFrequency:5,bossSprayOpen:2,bossLife:300,bulletWidth:3,bulletHeight:3,bulletOx:1,bulletOy:1,bulletMaxHeight:500,bulletsVariance:20,bulletsMaxdY:200,waveEasyCount:3,waveEasyTimeMin:4,waveEasyTimeMax:6,waveEasyAmplitudeMin:8,waveEasyAmplitudeMax:32,waveEasyFrequencyMin:.1,waveEasyFrequencyMax:.25,waveEasyRxMin:32,waveEasyRxMax:80,waveEasyRyMin:16,waveEasyRyMax:48,waveEasySyMin:16,waveEasySyMax:160,waveMediumCount:3,waveMediumTimeMin:4,waveMediumTimeMax:6,waveMediumAmplitudeMin:8,waveMediumAmplitudeMax:32,waveMediumFrequencyMin:.1,waveMediumFrequencyMax:.25,waveMediumRxMin:32,waveMediumRxMax:80,waveMediumRyMin:16,waveMediumRyMax:48,waveMediumSyMin:16,waveMediumSyMax:160,waveHardCount:3,waveHardTimeMin:4,waveHardTimeMax:6,waveHardAmplitudeMin:8,waveHardAmplitudeMax:32,waveHardFrequencyMin:.1,waveHardFrequencyMax:.25,waveHardRxMin:32,waveHardRxMax:80,waveHardRyMin:16,waveHardRyMax:48,waveHardSyMin:0,waveHardSyMax:160,waveTempo:1,powerUpMaxCount:5,powerUpCost:[0,10,25,50,100,500,"ðŸ‘‘"],backgroundSpeed:100,borderSpeed:50,borderPeakRandMin:1,borderPeakRandMax:3,borderFlatRandMin:8,borderFlatRandMax:24,engineTimeResolution:1,epsilon:.1,delta:.001};let w=x.width/x.worldWidth,b=x.height/x.worldHeight;function v(e,i){const n=new Image(t(f).meta.size.w,t(f).meta.size.h);return n.src=e,i&&(n.onload=i),n}function S(e,t,i){const n=y(e);n.width=t,n.height=i;const r=n.getContext("2d");return r.imageSmoothingEnabled=!1,r}function g(e,i){!function({gameCanvas:e,image:i},{x:n,y:r,ox:o,oy:l,sprite:s}){if(!i.complete)return;const d=t(f).frames[s].frame;e.drawImage(i,d.x,d.y,d.w,d.h,a((n-o)*w),a((r-l)*b),d.w*w,d.h*b)}(e,i),x.debug&&function({currentCanvas:e},{x:t,y:i,w:n,h:r,color:o}){e&&(e.fillStyle=o??"rgba(255, 165, 0, 0.5)"),e.fillRect(t*w,i*b,n*w,r*b)}(e,i)}function M({offscreenCanvas:e,currentCanvas:i,image:n},r,{x:o,y:a,w:l,h:s},d){if(!n.complete)return;const u=t(f).frames[r].frame;H(e),e.save();let h=e.canvas.height;d&&(e.scale(1,-1),h=u.h-h),e.drawImage(n,u.x,u.y,u.w,u.h,0,0,e.canvas.width,h),e.restore();const c=i.createPattern(e.canvas,"repeat");i.fillStyle=c,i.save(),i.translate(o*w,a*b),i.fillRect(0,0,l*w,s*b),i.restore()}function T(e,t){e.currentCanvas=t}function H(e){e.clearRect(0,0,e.canvas.width,e.canvas.height)}let C=0;let R,P=0;function E(e,t){const i=[];for(let n=0;n<t;n++)i.push(e());return i}function z(e,t){return{x:e,y:t}}function B(e,t){return z(e.x+t.x,e.y+t.y)}function W(e=x.bulletHeight,t=x.bulletWidth,i=!1,n){return{x:0,y:0,w:t,h:e,dx:0,dy:0,isActive:!1,dh:0,dhDirection:0,explodeTick:0,shielded:i,sprite:n?"friendly_bullet":"enemie_bullet",ox:x.bulletOx,oy:x.bulletOy}}function A(e){if(!e.isActive)return;e.x+=e.dx*x.delta;const t=e.h;if(e.h=d(e.h+e.dh,x.bulletMaxHeight),e.h==x.bulletMaxHeight&&(e.dy=-15*h(e.x/x.worldWidth*6*p)),e.y+=e.dy*x.delta-(e.h-t)*e.dhDirection,0!=e.explodeTick&&(e.explodeTick-=1,0==e.explodeTick)){if(null==e.bullets)return void F(e);const t=e.dx/2;for(let i=0;i<4;i++){let n=e.bullets.bullets.find((e=>!e.isActive));if(null==n)return void F(e);O(e.bullets,n,e,z(c(-1,i)*t,c(-1,l(i/2))*t+e.dy))}F(e)}(e.x<0||e.x>x.width)&&F(e),e.h==x.bulletHeight&&(e.y+e.h/2<0||e.y>x.worldHeight+e.h/2)&&F(e)}function k(e,t){if(t.isActive&&(g(e,t),t.bullets&&0==t.explodeTick&&t.bullets.bh!=t.h)){M(e,"friendly_bullet"==t.sprite?"friendly_vertical_laser":"vertical_laser",t,!1)}}function O(e,t,i,n){t.x=i.x,t.y=i.y,t.dx=n.x,t.dy=n.y,t.isActive=!0,t.bullets=e}function F(e){e.isActive=!1,e.dx=0,e.dy=0,e.x=0,e.y=0,null!=e.bullets&&(e.h=e.bullets.bh,e.w=e.bullets.bw,e.shielded=e.bullets.shielded),e.dh=0}function q(...e){return e[Math.floor(Math.random()*e.length)]}function U(e,t){return Math.random()*(t-e)+e}function D(e,t){return e=Math.ceil(e),t=Math.floor(t)+1,Math.floor(Math.random()*(t-e)+e)}function _(){return`rgba(${D(0,255)}, ${D(0,255)}, ${D(0,255)}, 0.5)`}var Y;function I(e,t,i,n,r,o,a=!1,l){return{bullets:E((()=>W(r,o,a,l)),e),baseSpeedX:t,baseSpeedY:i,lastRandY:0,sprayOpen:n,shielded:a,bh:r,bw:o}}function L(e,t){let i=U(-t,t),n=e.lastRandY+i;var r,o;return r=d(x.bulletsMaxdY,n),o=-x.bulletsMaxdY,n=Math.max(r,o),e.lastRandY=n,n}function X(e,t,i,n,r=0){let o=L(e,r);if(n<R.ConicEnd)for(let a=0;a<=n;a++){let l=e.bullets.find((e=>!e.isActive));if(null==l)return;O(e,l,i,z(t,e.baseSpeedY*u(p*((a+1)/(n+2)))*e.sprayOpen+o)),o=L(e,r)}if(n==R.Straight){let n=e.bullets.find((e=>!e.isActive));if(null==n)return;n.dh=t/x.playerBulletSpeedX*.2,n.dhDirection=.5,O(e,n,i,z(t,o))}if(n==R.StraightHole){let n=e.bullets.find((e=>!e.isActive));if(null==n)return;if(n.dh=.2,n.dhDirection=0,O(e,n,i,z(t,o+50*n.dh+10)),n=e.bullets.find((e=>!e.isActive)),null==n)return;n.dh=.2,n.dhDirection=1,O(e,n,i,z(t,o-(50*n.dh+10)))}if(n==R.Explosion){let n=e.bullets.find((e=>!e.isActive));if(null==n)return;n.w=x.bossBigBulletWidth,n.h=x.bossBigBulletHeight,n.bullets=e,n.explodeTick=x.bossBigBulletExplosionTick,O(e,n,B(i,z(x.bossBigBulletWidth,-x.bossBigBulletHeight/2)),z(t,o))}if(n==R.UpAndDown){for(let a=0;a<=10;a++){let l=e.bullets.find((e=>!e.isActive));if(null==l)return;O(e,l,B(i,z(x.bossWidth/2,x.bossHeight/2)),z(t*u(p*((a+1)/(n+2)))*.5+o,e.baseSpeedY)),o=L(e,r)}for(let a=0;a<=10;a++){let l=e.bullets.find((e=>!e.isActive));if(null==l)return;O(e,l,B(i,z(x.bossWidth/2,-x.bossHeight/2)),z(t*u(p*((a+1)/(n+2)))*.5+o,-e.baseSpeedY)),o=L(e,r)}}}function G(e){for(let t of N(e))A(t)}function Q(e,t){for(let i of N(t))k(e,i)}function N(e){return e.bullets.filter((e=>e.isActive))}function $(e){for(let t of e.bullets)F(t)}(Y=R||(R={}))[Y.Single=0]="Single",Y[Y.Double=1]="Double",Y[Y.Triple=2]="Triple",Y[Y.Quadruple=3]="Quadruple",Y[Y.Quintuple=4]="Quintuple",Y[Y.Sixtuple=5]="Sixtuple",Y[Y.ConicEnd=6]="ConicEnd",Y[Y.Straight=7]="Straight",Y[Y.StraightHole=8]="StraightHole",Y[Y.Explosion=9]="Explosion",Y[Y.UpAndDown=10]="UpAndDown";const j={up:!1,down:!1,left:!1,right:!1,space:!1,shift:!1,m:!1,x:null,y:null};onkeydown=onkeyup=e=>function(e,t){38!=e&&90!=e&&87!=e||(j.up=t);39!=e&&68!=e||(j.right=t);40!=e&&83!=e||(j.down=t);37!=e&&65!=e&&81!=e||(j.left=t);16==e&&(j.shift=t);32==e&&(j.space=t);77==e&&(j.m=t)}(e.keyCode,null!=e.type[5]);const J=y("game-canvas");function V(e){let t=!0;return()=>j[e]&&t?(t=!1,!0):(j[e]||(t=!0),!1)}ontouchmove=e=>{var t,i;t=e.changedTouches[0].pageX-J.offsetLeft,i=e.changedTouches[0].pageY-J.offsetTop-x.playerHeight,j.x=t/3,j.y=i/3};let K,Z,ee,te,ie=(...e)=>re(oe(...e)),ne=null,re=(...e)=>{let t=ne.createBufferSource(),i=ne.createBuffer(e.length,e[0].length,le);return e.map(((e,t)=>i.getChannelData(t).set(e))),t.buffer=i,t.connect(ne.destination),t.start(),t},oe=(e=1,t=.05,i=220,n=0,r=0,o=.1,a=0,l=1,s=0,d=0,u=0,h=0,c=0,y=0,p=0,f=0,m=0,x=1,w=0,b=0)=>{let v,S,g=2*Math.PI,M=s*=500*g/le**2,T=(0<p?1:-1)*g/4,H=i*=(1+2*t*Math.random()-t)*g/le,C=[],R=0,P=0,E=0,z=1,B=0,W=0,A=0;for(d*=500*g/le**3,p*=g/le,u*=g/le,h*=le,c=le*c|0,S=(n=99+le*n)+(w*=le)+(r*=le)+(o*=le)+(m*=le)|0;E<S;C[E++]=A)++W%(100*f|0)||(A=a?1<a?2<a?3<a?Math.sin((R%g)**3):Math.max(Math.min(Math.tan(R),1),-1):1-(2*R/g%2+2)%2:1-4*Math.abs(Math.round(R/g)-R/g):Math.sin(R),A=(c?1-b+b*Math.sin(2*Math.PI*E/c):1)*(0<A?1:-1)*Math.abs(A)**l*e*ae*(E<n?E/n:E<n+w?1-(E-n)/w*(1-x):E<n+w+r?x:E<S-m?(S-E-m)/o*x:0),A=m?A/2+(m>E?0:(E<S-m?1:(S-E)/m)*C[E-m|0]/2):A),v=(i+=s+=d)*Math.sin(P*p-T),R+=v-v*y*(1-1e9*(Math.sin(E)+1)%2),P+=v-v*y*(1-1e9*(Math.sin(E)**2+1)%2),z&&++z>h&&(i+=u,H+=u,z=0),!c||++B%c||(i=H,s=M,z=z||1);return C},ae=.3,le=44100,se=(e,t,i,n=125)=>{let r,o,a,l,s,d,u,h,c,y,p,f,m,x,w,b=0,v=[],S=[],g=[],M=0,T=0,H=1,C={},R=le/n*60>>2;for(;H;M++)v=[H=h=p=m=0],i.map(((n,p)=>{for(u=t[n][M]||[0,0,0],H|=!!t[n][M],w=m+(t[n][0].length-2-!h)*R,x=p==i.length-1,o=2,l=m;o<u.length+x;h=++o){for(s=u[o],c=o==u.length+x-1&&x||y!=(u[0]||0)|s|0,a=0;a<R&&h;a++>R-99&&c&&(f+=(f<1)/99))d=(1-f)*v[b++]/2||0,S[l]=(S[l]||0)-d*T+d,g[l]=(g[l++]||0)+d*T+d;s&&(f=s%1,T=u[1]||0,(s|=0)&&(v=C[[y=u[b=0]||0,s]]=C[[y,s]]||(r=[...e[y]],r[2]*=2**((s-12)/12),s>0?oe(...r):[])))}m=w}));return[S,g]},de=[[[,0,261,,,2,2,,,,,,,,,,.01],[,0,32,.05,,.2,3,5],[3,0,43,,,.25,,,,,,,,2],[1.6,0,655,,,,3,1.65,,,,,.02,3.8,-.1,,.2],[,0,232,.01,.09,.15,2,,,,,,154.87,,,,.26]],[[[,,4,,,,,,3,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,,3,,,,,,,,,,,,,,,,,,,,,,3,,,,],[,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[2,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,],[3,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[4,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,,,,,,,,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,22,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[2,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,],[3,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[4,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,,,,,,,,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,22,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[4,,,,,,,,,,,,,,30,29,30,29,,,,,18,17,18,17,,,,,,,,,,,,,,,,,,,,,30,29,30,29,,,,,18,17,18,17,15,,,,,,,,],[3,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,13]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[4,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,,,,,,,,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,22,,,,,,,,],[4,,13,13,13,13,13,13,12,12,12,12,12,12,12,,,,12,12,12,12,,,,,12,12,12,12,12,12,12,12,13,13,13,13,13,13,10,10,10,10,10,10,,,,,10,10,10,10,,,,,,10,10,10,10,10,10,10],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[4,,,,,,,,,,,,,,30,29,30,29,,,,,18,17,18,17,,,,,,,,,,,,,,,,,,,,,30,29,30,29,,,,,18,17,18,17,15,,,,,,,,],[3,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,13]]],[0,1,1,2,2,3,3,4,4,5,5,3,3,4,4,5,5,2,2],135,undefined],ue=[[[.5,0,128,,.08,.5,3],[.8,0,32,,.07,.11,2,0,,,.5,.01],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.9,0,32,,,.35,3,2]],[[[1,,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,15,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,21],[,,15,,20,15,,18,,,,,,,21,16,15,,15,,20,15,,20,,,,,,,23,18,15,,],[2,,,,,,,,,,13,13,13,13,,,,,,,,,,,,,1,1,1,1,,,,,]],[[1,,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,15,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,21],[,,15,,20,15,,18,,,,,,,21,16,15,,15,,20,15,,20,,,,,,,23,18,15,,],[2,,,,,,,,,,13,13,13,13,,,,,,,,,,,,,1,1,1,1,,,,,],[3,,20,,,,20,,,,20,,,,20,,15,,13,,,,13,,,,13,,,,13,,16,,]],[[1,,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,15,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,21]]],[2,2,0,0,1,0,1,0,1,0],80],he=[[[1.5,0,130,,,.5,,,,,,,,,,,,.15,.6],[,0,130,.01,.09,.15,2,,,,,,154.87,,,,.26],[1.4,0,32,,,.25,3,5]],[[[,,24,,,,20,,,,17,,,,13,,,,10,,,,10,,,,10,,,,10,,,,13,,,,17,,,,20,,,,24,,,,10,,,,10,,,,10,,,,13,,,,],[1,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,10,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,13,,],[,,36,32,34,,,,,,29,25,27,,,,,,22,,,,22,,,,,,,,,,,,22,25,24,,,,,,29,32,30,,,,,,25,,,,25,,,,25,,,,25,,,,],[2,,12,,12,,12,,12,,12,,12,,12,,12,,10,,10,,10,,10,,10,,10,,10,,10,,12,,12,,12,,12,,12,,12,,12,,12,,10,,10,,10,,10,,10,,10,,10,,5,,]],[[,,24,,,,20,,,,17,,,,13,,,,10,,,,10,,,,10,,,,10,,,,13,,,,17,,,,20,,,,24,,,,10,,,,10,,,,10,,,,13,,,,],[1,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,10,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,13,,],[,,36,32,34,,,,,,29,25,27,,,,,,22,,,,22,,,,,,,,,,,,22,25,24,,,,,,29,32,30,,,,,,25,,,,25,,,,25,,,,25,,,,]],[[,,24,,,,20,,,,17,,,,13,,,,10,,,,10,,,,10,,,,10,,,,13,,,,17,,,,20,,,,24,,,,10,,,,10,,,,10,,,,13,,,,],[,,36,32,34,,,,,,29,25,27,,,,,,22,,,,22,,,,,,,,,,,,22,25,24,,,,,,29,32,30,,,,,,25,,,,25,,,,25,,,,25,,,,]],[[,,24,,,,20,,,,17,,,,13,,,,10,,,,10,,,,10,,,,10,,,,13,,,,17,,,,20,,,,24,,,,10,,,,10,,,,10,,,,13,,,,],[1,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,10,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,13,,]]],[2,3,3,1,1,0,0,0,0,0,0],120],ce=[[[1.5,0,32,.05,.25,,3,3,,,,,,,,,3,.6],[,0,128,,,.2,2,,,,,,,,,.02,.01],[,0,1024,,,.3,2,.2,-.1,-.15,9,.02,,.1,.12,,.06]],[[[,,13,,13,,,,,,6,,6,,,,,,8,,8,,,,,,3,,3,,,,,,],[1,,25,,25,,25,,25,,18,,18,,18,,18,,12,,12,,12,,12,,3,,3,,3,,3,,],[1,,22,,22,,22,,22,,15,,15,,15,,15,,8,,8,,8,,8,,6,,6,,6,,6,,],[2,,25,22,,,,,,,15,18,,15,,,,,12,,,,,,,,6,,6,6,,3,,,]],[[,,13,,13,,,,,,6,,6,,,,,,8,,8,,,,,,3,,3,,,,,,],[1,,25,,25,,25,,25,,18,,18,,18,,18,,12,,12,,12,,12,,3,,3,,3,,3,,],[1,,22,,22,,22,,22,,15,,15,,15,,15,,8,,8,,8,,8,,6,,6,,6,,6,,],[2,,25,22,,,,,,,15,15,,18,,,,,8,8,,12,,,,,6,,6,6,,3,,,]],[[,,13,,13,,,,,,6,,6,,,,,,8,,8,,,,,,3,,3,,,,,,],[1,,25,,,,,,,,18,,,,18,,,,12,,,,,,,,3,,,,3,,,,],[1,,22,,,,22,,,,15,,,,,,,,8,,,,8,,,,6,,,,,,,,]]],[2,2,0,1,0,1],120];function ye(){null!=te&&te.stop()}function pe(){ye(),ne?.resume(),te=re(...Z),te.loop=!0}function fe(){ie(...[,,150,.05,,.05,,1.3,,,,,,3]),ie(...[,.2,46,.02,.05,.02,2,,17,,-250,.05,.01,,5])}V("space"),V("shift");let me,xe=["cerbere","cerbere2"];function we(e){if(G(e.bullets),e.animationTime+=x.delta,e.animationTime>x.playerAnimationTime&&(e.animationTime=0,e.sprite=e.sprite==xe[0]?xe[1]:xe[0]),e.end)return e.x<1.1*x.worldWidth?e.x+=x.playerSpeedX/2*x.delta:(fe(),pe(),ft(et.End,He),fe()),void(e.y>x.worldHeight/2-x.playerHeight/2?e.y+=-x.playerSpeedY/2*x.delta:e.y+=x.playerSpeedY/2*x.delta);e.shootTime+=x.delta,e.shootTime>=1/e.shootF&&(!function(e){null!=e.bullets.bullets.find((e=>!e.isActive))&&X(e.bullets,(.5*e.shootSpeed+1)*x.playerBulletSpeedX,B(e,z(x.playerWidth,x.playerHeight/2)),e.bulletsPattern)}(e),e.shootTime=0);let t=0,i=0;G(e.bullets),e.invincibleTime>0?e.invincibleTime-=x.delta:e.invincibleTime=0,j.left&&(t+=-x.playerSpeedX),j.right&&(t+=x.playerSpeedX),j.up&&(i+=-x.playerSpeedY),j.down&&(i+=x.playerSpeedY),e.dx=t,e.dy=i,e.x+=e.dx*x.delta,e.y+=e.dy*x.delta,j.x&&(e.x=j.x),j.y&&(e.y=j.y),e.x<=0&&(e.x=0),e.x>=x.worldWidth-x.playerWidth&&(e.x=x.worldWidth-x.playerWidth),e.y<=0&&(e.y=0),e.y>=x.worldHeight-x.playerHeight&&(e.y=x.worldHeight-x.playerHeight)}function be(e){e.x=x.playerWidth,e.y=x.worldHeight/2,e.dx=0,e.dy=0;let t=Me;e.shootSpeed=t[me.Speed],e.shootF=x.playerShootF*(t[me.Speed]+1),e.shieldCount=t[me.Shield],e.shieldCount==x.powerUpMaxCount&&(e.bullets.shielded=!0),t[me.Multishot]==x.powerUpMaxCount?e.bulletsPattern=R.Straight:e.bulletsPattern=t[me.Multishot],Be(e.shieldCount)}function ve(e){return 0==e.invincibleTime&&(e.shieldCount-=1,ie(...[.4,0,941,,.06,.4,4,.74,-222,,,,,.8,,1]),e.invincibleTime=x.playerInvincibleTime),Be(e.shieldCount),e.shieldCount}function Se(e,t,i=!1){return!(e.money+t<0)&&(i||(e.money+=t,Ee(e.money)),!0)}var ge;(ge=me||(me={}))[ge.Speed=0]="Speed",ge[ge.Shield=1]="Shield",ge[ge.Multishot=2]="Multishot";let Me=[0,0,0],Te=0,He=null,Ce=0,Re=!0;function Pe(e){y("ui-shop").style.display=e?"flex":"none"}function Ee(e){y("current-money").innerText=e.toString()}function ze(e){Ce=e,Ae()}function Be(e){Te=e,Ae()}function We(e){const t=He.player,i=Me[e];return i!=x.powerUpMaxCount&&Se(t,-x.powerUpCost[i+1],!0)?"black":"gray"}function Ae(){y("current-speed").innerText=Me[me.Speed].toString(),y("current-shield").innerText=Me[me.Shield].toString(),y("current-multishot").innerText=Me[me.Multishot].toString(),y("current-player-shield").innerText=Te.toString(),y("speed-plus").style.color=We(me.Speed),y("shield-plus").style.color=We(me.Shield),y("multishot-plus").style.color=We(me.Multishot),y("speed-minus").style.color=0==Me[me.Speed]?"gray":"black",y("shield-minus").style.color=0==Me[me.Shield]?"gray":"black",y("multishot-minus").style.color=0==Me[me.Multishot]?"gray":"black",y("current-progress").style.width=`${Ce}%`,y("shop").style.display=Re?"none":"flex",y("speed-cost").innerText=String(x.powerUpCost[Me[me.Speed]+1]),y("shield-cost").innerText=String(x.powerUpCost[Me[me.Shield]+1]),y("multishot-cost").innerText=String(x.powerUpCost[Me[me.Multishot]+1]),y("shop-label").style.display=Re?"none":"block"}window.onPowerUpChanged=function(e,t){const i=He.player;let n=Me[e];t>0&&(n+=1);let r=x.powerUpCost[n];Se(i,-t*r,!0)&&(Me[e]+=t,Me[e]>x.powerUpMaxCount?Me[e]=x.powerUpMaxCount:Me[e]<0?Me[e]=0:Se(i,-t*r),Te=Me[me.Shield],Ae())},window.play=function(){"ontouchstart"in document.documentElement&&(document.documentElement.requestFullscreen(),window.screen.orientation.lock("landscape").catch((()=>{}))),ft(et.Game,He),Re=!1};const ke={waitTime:2,tx:.8*x.worldWidth-x.bossWidth,ty:.5*x.worldHeight-x.bossHeight/2,dx:5,dy:15,shootPattern:[R.Sixtuple,R.Quintuple,R.Triple,R.UpAndDown],shootCount:[4,3,5,5],shootFrequency:[4,3,2,5],shootSpeed:[50,60,75,50],shootRandom:[25,50,75,50],repeat:3,resetPosOnRepeat:!0},Oe={waitTime:1,tx:.5*x.worldWidth,ty:.5*x.worldHeight-x.bossHeight/2,dx:25,dy:0,shootPattern:[R.UpAndDown],shootCount:[3],shootFrequency:[1],shootSpeed:[200],repeat:1,shootRandom:[0],resetPosOnRepeat:!1},Fe={waitTime:3,tx:x.worldWidth-x.bossWidth,ty:.2*x.worldHeight,dx:0,dy:60,shootPattern:[R.UpAndDown,R.StraightHole],shootCount:[5,30],shootFrequency:[5,3],shootSpeed:[200,75],repeat:1,shootRandom:[0,5],resetPosOnRepeat:!0},qe={waitTime:0,tx:x.worldWidth-x.bossWidth,ty:.5*x.worldHeight-x.bossHeight,dx:-50,dy:0,shootPattern:[R.Explosion,R.Double],shootCount:[5,5],shootFrequency:[3,3],shootSpeed:[150,175],repeat:2,shootRandom:[15,50],resetPosOnRepeat:!0};function Ue(){const e=_();return{x:.5*x.worldWidth-x.bossWidth/2,y:.5*x.worldHeight-x.bossHeight/2,w:x.bossWidth,h:x.bossHeight,dx:0,dy:0,color:e,bullets:I(x.bossBulletsPoolSize,x.bossBulletSpeedX,x.bossBulletSpeedY,x.bossSprayOpen,x.bulletWidth,x.bulletHeight,void 0,!1),elapsedTime:0,currentPattern:Fe,shootElapsedTime:0,newPatternTime:0,shootCount:0,targetReached:!1,patternIndex:0,repeatCount:0,life:x.bossLife,sprite:"boss",ox:x.bossOx,oy:x.bossOy,end:!1}}function De(e){if(e.elapsedTime+=x.delta,G(e.bullets),e.end)return void(e.shootElapsedTime-=x.delta);e.shootElapsedTime+=x.delta;const t=x.bossSpeed;if(0!=e.newPatternTime){if(!(e.elapsedTime>=e.newPatternTime))return;e.newPatternTime=0,e.currentPattern==ke||e.currentPattern==Oe?e.currentPattern=Fe:e.currentPattern==Fe?e.currentPattern=qe:e.currentPattern==qe&&(e.currentPattern=ke)}if(e.targetReached?(e.y>.9*x.worldHeight-x.bossHeight||e.y<.1*x.worldHeight)&&(e.dy*=-1):(e.x>e.currentPattern.tx?e.dx=-t:e.x<e.currentPattern.tx&&(e.dx=t),e.y>e.currentPattern.ty?e.dy=-t:e.y<e.currentPattern.ty&&(e.dy=t)),e.x+=e.dx*x.delta,e.y+=e.dy*x.delta,!e.targetReached)return s(e.currentPattern.tx-e.x)<1&&s(e.currentPattern.ty-e.y)<1?(e.targetReached=!0,e.dx=e.currentPattern.dx,void(e.dy=e.currentPattern.dy)):void 0;if(e.sprite="boss2",e.shootCount<e.currentPattern.shootCount[e.patternIndex])e.shootElapsedTime>=1/e.currentPattern.shootFrequency[e.patternIndex]&&(e.shootCount+=1,e.shootElapsedTime=0,null!=e.currentPattern.shootPattern[e.patternIndex]&&X(e.bullets,e.dx-e.currentPattern.shootSpeed[e.patternIndex],B(e,z(0,x.bossHeight/2)),e.currentPattern.shootPattern[e.patternIndex],e.currentPattern.shootRandom[e.patternIndex]));else if(e.sprite="boss",e.shootCount=0,e.bullets.lastRandY=0,e.patternIndex+1==e.currentPattern.shootFrequency.length){if(e.patternIndex=0,e.repeatCount+1==e.currentPattern.repeat)return e.repeatCount=0,e.targetReached=!1,void(e.newPatternTime=e.elapsedTime+e.currentPattern.waitTime);e.repeatCount+=1,e.currentPattern.resetPosOnRepeat&&(e.targetReached=!1)}else e.patternIndex+=1}function _e(e){e.life--,0==e.life?(He.player.end=!0,He.player.invincibleTime=0,e.end=!0,e.shootElapsedTime=2,ze(50+(x.bossLife-e.life)/x.bossLife*50),fe()):ze(50+(x.bossLife-e.life)/x.bossLife*50)}function Ye(e,t){(!t.end||l(t.elapsedTime/x.playerBlinkPeriod)%2==0&&t.shootElapsedTime>=0)&&g(e,t),Q(e,t.bullets)}function Ie(e){e.x=x.worldWidth+x.bossWidth,e.y=.5*x.worldHeight-x.bossHeight/2,e.dx=0,e.dy=0,$(e.bullets),e.elapsedTime=0,e.currentPattern=Oe,e.shootElapsedTime=0,e.newPatternTime=0,e.shootCount=0,e.targetReached=!1,e.patternIndex=0,e.repeatCount=0,e.life=x.bossLife}let Le;var Xe;let Ge,Qe;function Ne(e,t,i,n,r,o,a,l,s=R.Single,d){return{x:x.worldWidth,y:e,sy:e,dx:0,dy:0,w:x.enemyWidth,h:x.enemyHeight,pattern:t,time:n,color:i,dead:!1,amplitude:r,frequency:o,rx:a,ry:l,elapsedTime:0,shootElapsedTime:0,distance:0,direction:Le.Left,bullets:I(x.enemyBulletsPoolSize,x.enemyBulletSpeedX,x.enemyBulletSpeedY,x.enemySprayOpen,x.bulletWidth,x.bulletHeight,void 0,!1),bulletsPattern:s,sprite:d,ox:x.enemyOx,oy:x.enemyOy}}function $e(e){if(G(e.bullets),e.dead)return;const t=e.frequency,i=e.amplitude,n=(x.worldWidth+x.enemyWidth)/e.time;e.elapsedTime+=x.delta,e.shootElapsedTime+=x.delta,e.pattern==Ge.Circular&&(e.dx=2*p*t*i*u(2*p*t*e.elapsedTime)-n,e.dy=2*p*t*i*h(2*p*t*e.elapsedTime)),e.pattern==Ge.Rectangular&&(null==e.direction&&(e.direction=Le.Left),e.direction==Le.Left&&(e.distance>=e.rx&&(e.y+e.ry>x.worldHeight-1.5*x.tileSize?e.direction=Le.Up:e.y-e.ry<.5*x.tileSize?e.direction=Le.Down:e.direction=q(Le.Up,Le.Down),e.distance=0),e.dx=-n,e.dy=0,e.distance+=-e.dx*x.delta),e.direction,Le.Right,e.direction==Le.Up&&(e.distance>=e.ry&&(e.direction=Le.Left,e.distance=0),e.dy=-n/2,e.dx=0,e.distance+=-e.dy*x.delta),e.direction==Le.Down&&(e.distance>=e.ry&&(e.direction=Le.Left,e.distance=0),e.dy=n/2,e.dx=0,e.distance+=e.dy*x.delta)),e.pattern==Ge.Triangular&&(e.y>=e.sy+i&&(e.dy=-4*i*t),(0==e.dy||e.y<=e.sy-i)&&(e.dy=4*i*t),e.dx=-n),e.pattern==Ge.Straight&&(e.dx=-n),e.x+=e.dx*x.delta,e.y+=e.dy*x.delta,e.shootElapsedTime>=1/x.enemyShootFrequency&&(e.shootElapsedTime=0,X(e.bullets,-n-x.enemyBulletSpeedX,B(e,z(0,x.enemyHeight/2)),e.bulletsPattern))}function je(e,t){Q(e,t.bullets),t.dead||g(e,t)}var Je;(Xe=Le||(Le={}))[Xe.Up=0]="Up",Xe[Xe.Left=1]="Left",Xe[Xe.Right=2]="Right",Xe[Xe.Down=3]="Down",function(e){e[e.Straight=0]="Straight",e[e.Triangular=1]="Triangular",e[e.Circular=2]="Circular",e[e.Rectangular=3]="Rectangular"}(Ge||(Ge={})),(Je=Qe||(Qe={}))[Je.Easy=0]="Easy",Je[Je.Medium=1]="Medium",Je[Je.Hard=2]="Hard";let Ve=["floating_eye","imp","skeleton","zombie"];function Ke(e){const t=[];if(e==Qe.Easy){const i=D(3,6);for(let n=0;n<i;n++)t.push(Ze(e))}if(e==Qe.Medium){const i=D(7,12);for(let n=0;n<i;n++)t.push(Ze(e))}if(e==Qe.Hard){const i=D(12,17);for(let n=0;n<i;n++)t.push(Ze(e))}return{difficulty:e,enemies:t}}function Ze(e){const t=_();if(e==Qe.Easy){const e=q(Ge.Straight,Ge.Triangular),i=U(x.waveEasyAmplitudeMin,x.waveEasyAmplitudeMax),n=U(x.waveEasyFrequencyMin,x.waveEasyFrequencyMax),r=U(x.waveEasyRxMin,x.waveEasyRxMax),o=U(x.waveEasyRyMin,x.waveEasyRyMax);return Ne(U(x.waveEasySyMin,x.waveEasySyMax),e,t,U(x.waveEasyTimeMin,x.waveEasyTimeMax),i,n,r,o,D(R.Single,R.Double),q(...Ve))}if(e==Qe.Medium){const e=q(Ge.Straight,Ge.Triangular,Ge.Rectangular),i=U(x.waveMediumAmplitudeMin,x.waveMediumAmplitudeMax),n=U(x.waveMediumFrequencyMin,x.waveMediumFrequencyMax),r=U(x.waveMediumRxMin,x.waveMediumRxMax),o=U(x.waveMediumRyMin,x.waveMediumRyMax);return Ne(U(x.waveMediumSyMin,x.waveMediumSyMax),e,t,U(x.waveMediumTimeMin,x.waveMediumTimeMax),i,n,r,o,D(R.Single,R.Quintuple),q(...Ve))}if(e==Qe.Hard){const e=q(Ge.Triangular,Ge.Rectangular,Ge.Circular),i=U(x.waveHardAmplitudeMin,x.waveHardAmplitudeMax),n=U(x.waveHardFrequencyMin,x.waveHardFrequencyMax),r=U(x.waveHardRxMin,x.waveHardRxMax),o=U(x.waveHardRyMin,x.waveHardRyMax);return Ne(U(x.waveHardSyMin,x.waveHardSyMax),e,t,U(x.waveHardTimeMin,x.waveHardTimeMax),i,n,r,o,D(R.Double,R.Sixtuple),q(...Ve))}throw new Error}let et,tt=1,it=x.waveEasyCount+x.waveMediumCount+x.waveHardCount+1;function nt(e){if(e.waveTempo>0?(e.waveTempo-=x.delta,e.waveTempo<=0&&(e.waveTempo=0,at(e))):e.entities.every((e=>(e.x<-e.w||e.dead)&&e.bullets.bullets.every((e=>!e.isActive))))&&(e.waveTempo=x.waveTempo),tt<it)for(let t of e.entities)$e(t);else De(e.boss)}function rt(e,t){if(tt<it)for(let i of t.entities)je(e,i);else Ye(e,t.boss)}function ot(e){return e.entities.filter((e=>!e.dead))}function at(e){if(10==tt)return;tt++;let t=Qe.Easy;tt>3&&tt<=6&&(t=Qe.Medium),tt>6&&(t=Qe.Hard),e.entities=Ke(t).enemies,e.deadCount=0,Se(e.player,1),ze(tt/9*50),tt==it&&(ye(),ne?.resume(),te=re(...K[D(0,1)]),te.loop=!0)}function lt(e,t){e.dead=!0,t.deadCount++}function st(e,t){const i=ht(dt(e),dt(t)),n=ht(ut(e),ut(t));return null==i||null==n?null:{x:i.x,y:n.x,w:i.y-i.x,h:n.y-n.x}}function dt(e){return{x:e.x,y:e.x+e.w}}function ut(e){return{x:e.y,y:e.y+e.h}}function ht(e,t){return e.y<=t.x||t.y<=e.x?null:{x:Math.max(e.x,t.x),y:Math.min(e.y,t.y)}}var ct;function yt(e){e.scene==et.Game&&(C-=x.backgroundSpeed*x.delta,C<=-3*x.worldWidth&&(C=0),P-=x.borderSpeed*x.delta,P<=-3*x.worldWidth&&(P=0),we(e.player),nt(e.enemies),x.collision&&function(e){const t=e.enemies,i=e.player,n=t.boss;if(!i.end){for(let n of ot(t)){for(let e of N(i.bullets))if(null!=st(n,e)){F(e),lt(n,t),Se(i,1);break}for(let t of N(n.bullets))if(null!=st(i,t)){ve(i)<0&&ft(et.Shop,e);break}null!=st(i,n)&&ve(i)<0&&ft(et.Shop,e)}if(0!=n.elapsedTime){for(let n of N(t.boss.bullets))null!=st(i,n)&&ve(i)<0&&ft(et.Shop,e);for(let e of N(i.bullets))null!=st(t.boss,e)&&(F(e),_e(t.boss));null!=st(i,n)&&ve(i)<0&&ft(et.Shop,e)}}}(e))}function pt(e,t){T(e,e.backgroundCanvas),function(e,t){M(e,t.sprite,{x:C,y:0,w:4*x.worldWidth,h:x.worldHeight},!1)}(e,t.background),t.scene==et.Game&&(T(e,e.gameCanvas),function(e,t){l(t.invincibleTime/x.playerBlinkPeriod)%2==0&&g(e,t);for(let i of t.bullets.bullets)i.isActive&&k(e,i);0!=t.shieldCount&&g(e,{...t,sprite:"shield",x:t.x-4,y:t.y-4})}(e,t.player),rt(e,t.enemies)),T(e,e.foregroundCanvas),function(e){M(e,"border1",{x:P,y:x.worldHeight-x.tileSize,w:4*x.worldWidth,h:x.tileSize},!1),M(e,"border1",{x:P,y:0,w:4*x.worldWidth,h:x.tileSize},!0)}(e)}function ft(e,t){var i;be(t.player),i=t.enemies,tt=1,at(i),Ie(t.enemies.boss),t.scene=e,e==et.Shop&&(Pe(!0),pe()),e==et.Game&&(Pe(!1),ye(),ne?.resume(),te=re(...ee),te.loop=!0),e==et.End&&(Pe(!0),y("shop-label").innerText="Thank you for playing!",y("shop").style.display="none",y("play").style.display="none",pe())}(ct=et||(et={}))[ct.Shop=0]="Shop",ct[ct.Game=1]="Game",ct[ct.End=2]="End";let mt=x.engineTimeResolution,xt=performance.now(),wt=xt;const bt=function(){const e=function(){const e={x:x.playerWidth,dx:0,y:x.worldHeight/2,dy:0,w:x.playerWidth,h:x.playerHeight,bullets:I(x.playerBulletsPoolSize,x.playerBulletSpeedX,x.playerBulletSpeedY,x.playerSprayOpen,x.playerBulletWidth,x.playerBulletHeight,void 0,!0),bulletsPattern:R.Single,shootSpeed:1,shieldCount:0,money:0,sprite:xe[0],invincibleTime:0,ox:x.playerOx,oy:x.playerOy,animationTime:0,shootF:x.playerShootF,shootTime:0,end:!1};return Ee(e.money),e}(),t=function(e){return{entities:Ke(Qe.Easy).enemies,deadCount:0,boss:Ue(),player:e,waveTempo:0}}(e),i={background:{x:0,y:0,w:0,h:0,sprite:"basic_cobble",ox:0,oy:0},player:e,enemies:t,scene:et.Shop};return He=i,Ae(),Pe(!0),ne=new window.AudioContext,Z=se(...he),K=[se(...de),se(...ue)],ee=se(...ce),i}(),vt=function(){const e=S("game-canvas",x.width,x.height);return{image:v(m),gameCanvas:e,backgroundCanvas:S("background-canvas",x.width,x.height),foregroundCanvas:S("foreground-canvas",x.width,x.height),offscreenCanvas:S("offscreen-canvas",x.tileSize*w,x.tileSize*b),currentCanvas:e}}();!function e(t){window.requestAnimationFrame((t=>e(t)));var i=0;t>xt+mt&&(i=l((t-xt)/mt));for(var n=0;n<i;n++)xt+=mt,yt(bt);(function({gameCanvas:e,backgroundCanvas:t,offscreenCanvas:i,foregroundCanvas:n}){H(e),H(t),H(n),H(i)})(vt),pt(vt,bt),wt=t}(0);