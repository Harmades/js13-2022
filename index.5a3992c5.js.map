{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-e540c6dbaa6c96ce.js","src/settings.ts","src/alias.ts","src/renderer.ts","node_modules/@parcel/runtime-js/lib/runtime-b53a5f11334a5092.js","src/input.ts","src/sound.ts","src/logo.ts","src/app.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"hvItV\\\":\\\"index.5a3992c5.js\\\",\\\"8lAoY\\\":\\\"logo.0a7a3f9d.png\\\"}\"));","export const Settings = {\n    debug: false,\n\n    width: 960,\n    height: 640,\n\n    engineTimeResolution: 1,\n\n    epsilon: 0.1,\n}","export function sign(value: number, defaultIfZero = 1): number {\n    const sign = Math.sign(value);\n    return sign == 0 ? defaultIfZero : sign;\n}\n\nexport function round(value: number) { return Math.round(value); }\n\nexport function floor(value: number) { return Math.floor(value); }\n\nexport function abs(value: number) { return Math.abs(value); }\n\nexport function ceil(value: number) { return Math.ceil(value); }\n\nexport function max(value1: number, value2: number) { return Math.max(value1, value2); }\n\nexport function getElementById(id: string) { return document.getElementById(id); }\n\nexport function createElement(element: string) { return document.createElement(element); }\n\nexport const PI = Math.PI;","import { createElement, getElementById } from \"./alias\";\nimport { Settings } from \"./settings\";\n\nlet canvas: CanvasRenderingContext2D | null = null;\n\nexport function create() {\n    canvas = createCanvas(Settings.width, Settings.height, \"gameCanvas\");\n}\n\nexport function loadImage(path: string, onload?: () => void): HTMLImageElement {\n    const image = new Image(151, 151);\n    image.src = path;\n    if (onload) image.onload = onload;\n    return image;\n}\n\nexport function createCanvas(w: number, h: number, id: string | null = null): CanvasRenderingContext2D {\n    const canvas = (id == null ? createElement(\"canvas\") : getElementById(id)) as HTMLCanvasElement;\n    canvas.width = w;\n    canvas.height = h;\n    const context = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\n    return context;\n}\n\nexport function drawImage(image: HTMLImageElement, x: number, y: number): void {\n    canvas?.drawImage(image, x, y);\n}\n\nexport function rotate(angle: number): void {\n    canvas?.translate(Settings.width / 2, Settings.height / 2);\n    canvas?.rotate(angle);\n}\n\nexport function save(): void {\n    canvas?.save();\n}\n\nexport function restore(): void {\n    canvas?.restore();\n}\n\nexport function clear(): void {\n    canvas?.clearRect(0, 0, Settings.width, Settings.height);\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8lAoY\")).toString();","export const input = {\n    up: false,\n    down: false,\n    left: false,\n    right: false,\n    space: false,\n    shift: false,\n}\n\nexport type Input = typeof input;\n\nonkeydown = onkeyup = event => setKey(event.keyCode, event.type[5] != undefined);\n\nfunction setKey(keyCode: number, value: boolean) {\n    // Up (up / W / Z)\n    if (keyCode == 38 || keyCode == 90 || keyCode == 87) input.up = value;\n    // Right (right / D)\n    if (keyCode == 39 || keyCode == 68) input.right = value;\n    // Down (down / S)\n    if (keyCode == 40 || keyCode == 83) input.down = value;\n    // Left (left / A / Q)\n    if (keyCode == 37 || keyCode == 65 || keyCode == 81) input.left = value;\n    // Shift (left / right)\n    if (keyCode == 16) input.shift = value;\n    // Space\n    if (keyCode == 32) input.space = value;\n}\n\nexport function update(delta: number) { }\n\nexport function createReleasedKeyPress(key: keyof Input) {\n    let released = true;\n    return () => {\n        if (input[key] && released) {\n            released = false;\n            return true;\n        }\n        if (!input[key]) released = true;\n        return false;\n    };\n}","declare global {\n    var zzfxX: AudioContext;\n}\ndeclare function zzfxM(...arg: any): void;\ndeclare function zzfxP(...arg: any): void;\nconst u = undefined;\n\nconst cowboy = [[[.5, 0, 196, .05, .5, .6, 1], [.8, u, 24.5, .2, .3, .7, u, .5, u, u, 5, u, .1, u, u, u, u, .8, u, .2], [2, 0, 196, .02, .1, .4, 1], [, 0, 49, u, u, .2, 3, 5]], [[[, -1, 6, u, u, u, u, u, u, u, 8, u, u, u, u, u, u, u, 10, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [, 1, 10, u, u, u, u, u, u, u, 12, u, u, u, u, u, u, u, 17, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [, u, 3, u, u, u, u, u, u, u, 5, u, u, u, u, u, u, u, 6, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [2, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u, 15, 15, u, 13, u, 10, u]], [[, -1, 6, u, u, u, u, u, u, u, 8, u, u, u, u, u, u, u, 10, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [, 1, 10, u, u, u, u, u, u, u, 12, u, u, u, u, u, u, u, 17, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [, u, 3, u, u, u, u, u, u, u, 5, u, u, u, u, u, u, u, 6, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [2, u, 8, u, u, u, u, u, u, u, 3, u, 3, u, 10, u, u, u, 8, u, 6, u, u, u, u, u, u, 15, 15, u, 13, u, 10, u], [3, u, 8, u, u, u, 8, u, 10, u, u, u, u, u, u, u, u, u, u, u, u, u, 1, u, 3, u, u, 15, 15, u, 13, u, 10, u]], [[, -1, 6, u, u, u, u, u, u, u, 8, u, u, u, u, u, u, u, 10, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [, 1, 10, u, u, u, u, u, u, u, 12, u, u, u, u, u, u, u, 17, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [, u, 3, u, u, u, u, u, u, u, 5, u, u, u, u, u, u, u, 6, u, u, u, u, u, u, u, u, u, u, u, u, u, u, u], [2, u, 8, u, u, u, u, u, u, u, 3, u, 3, u, 10, u, u, u, 8, u, 6, u, u, u, u, u, u, 15, 15, u, 13, u, 10, u], [3, u, 8, u, u, u, 8, u, 10, u, u, u, 1, 3, u, u, 8, u, 1, 3, u, u, 1, u, 3, u, u, 15, 15, u, 13, u, 10, u]]], [0, 1, 2, 1, 2], 110, u];\n\nlet cowboy_song: any;\nlet audio_node: any;\n\nexport function load() {\n    zzfxX = new window.AudioContext;\n    cowboy_song = zzfxM(...cowboy);\n}\n\nexport function play_cowboy() {\n    zzfxX.resume();\n    audio_node = zzfxP(...cowboy_song);\n    audio_node.loop = true;\n}\n\nexport function stop_song() {\n    audio_node.stop();\n}","import logo from \"../assets/logo.png\";\nimport * as Renderer from \"./renderer\";\nimport { PI } from \"./alias\";\nimport { createReleasedKeyPress } from \"./input\";\nimport { load, play_cowboy, stop_song } from \"./sound\";\n\nlet image: HTMLImageElement | null = null;\nlet rotation: number = 0;\nlet width = 151;\nlet height = 151;\nlet input = createReleasedKeyPress(\"space\");\nlet isPlaying = false;\nlet isAudioInitialized = false;\n\nexport function create(): void {\n    image = Renderer.loadImage(logo);\n}\n\nexport function update(delta: number) {\n    rotation -= PI / 1080;\n    if (!isAudioInitialized) {\n        load();\n        isAudioInitialized = true;\n    }\n    if (isAudioInitialized && input()) {\n        if (isPlaying) {\n            stop_song();\n        } else {\n            play_cowboy();\n        }\n        isPlaying = !isPlaying;\n    }\n}\n\nexport function render(): void {\n    if (!image?.complete) return;\n    Renderer.save();\n    Renderer.rotate(rotation);\n    Renderer.drawImage(image, - width / 2, - height / 2);\n    Renderer.restore();\n}","import { Settings } from \"./settings\";\nimport { floor } from \"./alias\";\nimport * as Renderer from \"./renderer\";\nimport * as Logo from \"./logo\";\n\nlet tickLength = Settings.engineTimeResolution;\nlet lastTick = performance.now();\nlet lastRender = lastTick;\n\nLogo.create();\nRenderer.create();\n\nfunction loop(tFrame: number) {\n    window.requestAnimationFrame(t => loop(t));\n    var nextTick = lastTick + tickLength;\n    var numTicks = 0;\n\n    if (tFrame > nextTick) {\n        var elapsed = tFrame - lastTick;\n        numTicks = floor(elapsed / tickLength);\n    }\n\n    for (var i = 0; i < numTicks; i++) {\n        lastTick += tickLength;\n        update(tickLength / 1000);\n    }\n\n    render();\n    lastRender = tFrame;\n}\n\nfunction update(delta: number) {\n    Logo.update(delta);\n}\n\nfunction render() {\n    Renderer.clear();\n    Logo.render();\n}\n\nloop(0)"],"names":["$18c11f3350a906ea$export$6503ec6e8aabbaf","$18c11f3350a906ea$export$f7ad0328861e2f03","$18c11f3350a906ea$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","$95c1e97c8d1548a3$export$c72f6eaae7b9adff","debug","width","height","engineTimeResolution","epsilon","$dc72d67b15d606b5$export$6b5c1ceb16d01dc3","Math","PI","$621f3774f67738fc$var$canvas","$9cbcbc18ca4a0a3e$exports","URL","resolve","import","meta","url","toString","$8efa37a468313d04$export$b7e3ae3d7c15e42e","up","down","left","right","space","shift","onkeydown","onkeyup","event","keyCode","value","$8efa37a468313d04$var$setKey","undefined","type","$e0ea8097d55977c9$var$cowboy","$e0ea8097d55977c9$var$cowboy_song","$e0ea8097d55977c9$var$audio_node","$20044bd87620d305$var$image","$20044bd87620d305$var$rotation","$20044bd87620d305$var$input","key","released","$20044bd87620d305$var$isPlaying","$20044bd87620d305$var$isAudioInitialized","$20044bd87620d305$export$722fbec263ad908a","delta","zzfxX","window","AudioContext","zzfxM","stop","resume","zzfxP","loop","$20044bd87620d305$export$b3890eb0ae9dca99","angle","image","x","y","complete","save","translate","rotate","drawImage","restore","$f43313d21d3fd8e2$var$tickLength","$f43313d21d3fd8e2$var$lastTick","performance","now","$f43313d21d3fd8e2$var$lastRender","path","onload","Image","src","$621f3774f67738fc$export$fe58198efe02b173","$parcel$interopDefault","w","h","canvas1","element","document","createElement","getElementById","getContext","$621f3774f67738fc$export$cd3d1f114b139967","$f43313d21d3fd8e2$var$loop","tFrame","requestAnimationFrame","t","numTicks","floor","clearRect"],"version":3,"file":"index.5a3992c5.js.map"}