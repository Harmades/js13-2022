function e(e){return Math.round(e)}function t(e){return Math.floor(e)}function n(e){return Math.ceil(e)}function i(e,t){return Math.min(e,t)}function a(e){return Math.cos(e)}function r(e){return Math.sin(e)}function l(e,t){return Math.pow(e,t)}function u(e){return document.getElementById(e)}const o=Math.PI,d={debug:!1,width:960,height:640,playerSpeedX:300,playerSpeedY:300,playerWidth:50,playerHeight:50,playerBulletSpeedX:800,playerBulletSpeedY:100,playerBulletsPoolSize:200,playerSprayOpen:3,enemyWidth:50,enemyHeight:50,enemyBulletSpeedX:150,enemyBulletSpeedY:50,enemyBulletsPoolSize:50,enemyShootFrequency:1,enemyBulletPoolSize:1e3,enemySprayOpen:1,bossWidth:150,bossHeight:150,bossRxMin:100,bossRxMax:200,bossRyMin:100,bossRyMax:200,bossSpeed:300,bossBulletSpeedX:100,bossBulletSpeedY:100,bossBulletsPoolSize:200,bossBigBulletWidth:25,bossBigBulletHeight:25,bossBigBulletExplosionTick:200,bossPatternFrequency:5,bossSprayOpen:2,bulletWidth:5,bulletHeight:5,bulletMaxHeight:500,bulletsVariance:20,bulletsMaxdY:200,waveEasyCount:3,waveEasyTimeMin:4,waveEasyTimeMax:6,waveEasyAmplitudeMin:10,waveEasyAmplitudeMax:50,waveEasyFrequencyMin:.1,waveEasyFrequencyMax:.25,waveEasyRxMin:100,waveEasyRxMax:200,waveEasyRyMin:100,waveEasyRyMax:200,waveEasySyMin:0,waveEasySyMax:590,waveMediumCount:3,waveMediumTimeMin:4,waveMediumTimeMax:6,waveMediumAmplitudeMin:10,waveMediumAmplitudeMax:50,waveMediumFrequencyMin:.1,waveMediumFrequencyMax:.25,waveMediumRxMin:100,waveMediumRxMax:200,waveMediumRyMin:100,waveMediumRyMax:200,waveMediumSyMin:0,waveMediumSyMax:590,waveHardCount:3,waveHardTimeMin:4,waveHardTimeMax:6,waveHardAmplitudeMin:10,waveHardAmplitudeMax:50,waveHardFrequencyMin:.1,waveHardFrequencyMax:.25,waveHardRxMin:100,waveHardRxMax:200,waveHardRyMin:100,waveHardRyMax:200,waveHardSyMin:0,waveHardSyMax:590,engineTimeResolution:1,epsilon:.1,delta:.001};function s(e,t,n=null){const i=null==n?(a="canvas",document.createElement(a)):u(n);var a;i.width=e,i.height=t;return i.getContext("2d")}function h({canvas:t},{x:n,y:i,w:a,h:r},l="#FF0000"){t&&(t.fillStyle=l),t.fillRect(e(n),e(i),a,r)}function y(e,t){return{x:e,y:t}}function c(e,t){return y(e.x+t.x,e.y+t.y)}function p(e){if(!e.isActive)return;e.x+=e.dx*d.delta;const n=e.h;if(e.h=i(e.h+e.dh,d.bulletMaxHeight),e.h==d.bulletMaxHeight&&(e.dy=-30*r(e.x/d.width*6*o)),e.y+=e.dy*d.delta-(e.h-n)*e.dhDirection,0!=e.explodeTick&&(e.explodeTick-=1,0==e.explodeTick)){if(null==e.bullets)return void f(e);const n=e.dx/2;for(let i=0;i<4;i++){let a=e.bullets.bullets.find((e=>!e.isActive));if(null==a)return void f(e);M(a,e,y(l(-1,i)*n,l(-1,t(i/2))*n+e.dy))}f(e)}(e.x<0||e.x>d.width)&&f(e),e.h==d.bulletHeight&&(e.y<0||e.y>d.height)&&f(e)}function x(e,t){t.isActive&&h(e,t)}function M(e,t,n){e.x=t.x,e.y=t.y,e.dx=n.x,e.dy=n.y,e.isActive=!0}function f(e){e.isActive=!1,e.dx=0,e.dy=0,e.x=0,e.y=0,e.h=d.bulletHeight,e.w=d.bulletWidth,e.dh=0}function w(e,t){const n=[];for(let i=0;i<t;i++)n.push(e());return n}function m(...e){return e[Math.floor(Math.random()*e.length)]}function v(e,t){return Math.random()*(t-e)+e}function g(e,t){return e=Math.ceil(e),t=Math.floor(t)+1,Math.floor(Math.random()*(t-e)+e)}function b(){return Math.floor(16777215*Math.random()).toString(16)}let S;var H;function P(e,t,n,i){return{bullets:w((()=>({x:0,y:0,w:d.bulletWidth,h:d.bulletHeight,dx:0,dy:0,isActive:!1,dh:0,dhDirection:0,explodeTick:0,bullets:void 0})),e),baseSpeedX:t,baseSpeedY:n,lastRandY:0,sprayOpen:i}}function R(e,t){let n=v(-t,t),a=e.lastRandY+n;var r,l;return r=i(d.bulletsMaxdY,a),l=-d.bulletsMaxdY,a=Math.max(r,l),e.lastRandY=a,a}function T(e,t,n,i,r=0){let l=R(e,r);if(i<S.ConicEnd)for(let u=0;u<=i;u++){let d=e.bullets.find((e=>!e.isActive));if(null==d)return;M(d,n,y(t,e.baseSpeedY*a(o*((u+1)/(i+2)))*e.sprayOpen+l)),l=R(e,r)}if(i==S.Straight){let i=e.bullets.find((e=>!e.isActive));if(null==i)return;i.dh=.1,M(i,n,y(t,l))}if(i==S.StraightHole){let i=e.bullets.find((e=>!e.isActive));if(null==i)return;if(i.dh=.4,i.dhDirection=0,M(i,n,y(t,l+150*i.dh+10)),i=e.bullets.find((e=>!e.isActive)),null==i)return;i.dh=.4,i.dhDirection=1,M(i,n,y(t,l-(150*i.dh+10)))}if(i==S.Explosion){let i=e.bullets.find((e=>!e.isActive));if(null==i)return;i.w=d.bossBigBulletWidth,i.h=d.bossBigBulletHeight,i.bullets=e,i.explodeTick=d.bossBigBulletExplosionTick,M(i,c(n,y(d.bossBigBulletWidth,-d.bossBigBulletHeight/2)),y(t,l))}if(i==S.UpAndDown){for(let u=0;u<=10;u++){let s=e.bullets.find((e=>!e.isActive));if(null==s)return;M(s,c(n,y(d.bossWidth/2,d.bossHeight/2)),y(t*a(o*((u+1)/(i+2)))*.5+l,e.baseSpeedY)),l=R(e,r)}for(let u=0;u<=10;u++){let s=e.bullets.find((e=>!e.isActive));if(null==s)return;M(s,c(n,y(d.bossWidth/2,-d.bossHeight/2)),y(t*a(o*((u+1)/(i+2)))*.5+l,-e.baseSpeedY)),l=R(e,r)}}}function E(e){for(let t of e.bullets)p(t)}function B(e,t){for(let n of t.bullets)x(e,n)}(H=S||(S={}))[H.Single=0]="Single",H[H.Double=1]="Double",H[H.Triple=2]="Triple",H[H.Quadruple=3]="Quadruple",H[H.Quintuple=4]="Quintuple",H[H.Sixtuple=5]="Sixtuple",H[H.ConicEnd=6]="ConicEnd",H[H.Straight=7]="Straight",H[H.StraightHole=8]="StraightHole",H[H.Explosion=9]="Explosion",H[H.UpAndDown=10]="UpAndDown";const A={waitTime:2,tx:.8*d.width-d.bossWidth,ty:.5*d.height-d.bossHeight/2,dx:5,dy:15,shootPattern:[S.Sixtuple,S.Quintuple,S.Triple,S.UpAndDown],shootCount:[4,3,5,5],shootFrequency:[4,3,2,5],shootSpeed:[200,120,250,50],shootRandom:[150,300,300,150],repeat:3,resetPosOnRepeat:!0},C={waitTime:3,tx:d.width-d.bossWidth,ty:.2*d.height,dx:0,dy:60,shootPattern:[S.UpAndDown,S.StraightHole],shootCount:[5,40],shootFrequency:[5,3],shootSpeed:[200,100],repeat:1,shootRandom:[0,20],resetPosOnRepeat:!0},W={waitTime:0,tx:d.width-d.bossWidth,ty:.5*d.height-d.bossHeight,dx:-50,dy:0,shootPattern:[S.Explosion,S.Double],shootCount:[10,5],shootFrequency:[3,5],shootSpeed:[500,600],repeat:2,shootRandom:[600,100],resetPosOnRepeat:!0};let F;var q;let Y,D;function I(e,t,n,i,a,r,l,u,o=S.Single){return{x:d.width,y:e,sy:e,dx:0,dy:0,w:d.enemyWidth,h:d.enemyHeight,pattern:t,time:i,color:n,dead:!1,amplitude:a,frequency:r,rx:l,ry:u,elapsedTime:0,shootElapsedTime:0,distance:0,direction:F.Left,bullets:P(d.enemyBulletsPoolSize,d.enemyBulletSpeedX,d.enemyBulletSpeedY,d.enemySprayOpen),bulletsPattern:o}}var O;function X(e){const t=[];if(e==D.Easy){const n=g(3,6);for(let i=0;i<n;i++)t.push(k(e))}if(e==D.Medium){const n=g(5,10);for(let i=0;i<n;i++)t.push(k(e))}if(e==D.Hard){const n=g(9,17);for(let i=0;i<n;i++)t.push(k(e))}return{difficulty:e,enemies:t}}function k(e){const t=`#${b()}`;if(e==D.Easy){const e=m(Y.Straight,Y.Triangular),n=v(d.waveEasyAmplitudeMin,d.waveEasyAmplitudeMax),i=v(d.waveEasyFrequencyMin,d.waveEasyFrequencyMax),a=v(d.waveEasyRxMin,d.waveEasyRxMax),r=v(d.waveEasyRyMin,d.waveEasyRyMax);return I(v(d.waveEasySyMin,d.waveEasySyMax),e,t,v(d.waveEasyTimeMin,d.waveEasyTimeMax),n,i,a,r,g(S.Single,S.Double))}if(e==D.Medium){const e=m(Y.Straight,Y.Triangular,Y.Rectangular),n=v(d.waveMediumAmplitudeMin,d.waveMediumAmplitudeMax),i=v(d.waveMediumFrequencyMin,d.waveMediumFrequencyMax),a=v(d.waveMediumRxMin,d.waveMediumRxMax),r=v(d.waveMediumRyMin,d.waveMediumRyMax);return I(v(d.waveMediumSyMin,d.waveMediumSyMax),e,t,v(d.waveMediumTimeMin,d.waveMediumTimeMax),n,i,a,r,g(S.Single,S.Quintuple))}if(e==D.Hard){const e=m(Y.Triangular,Y.Rectangular,Y.Circular),n=v(d.waveHardAmplitudeMin,d.waveHardAmplitudeMax),i=v(d.waveHardFrequencyMin,d.waveHardFrequencyMax),a=v(d.waveHardRxMin,d.waveHardRxMax),r=v(d.waveHardRyMin,d.waveHardRyMax);return I(v(d.waveHardSyMin,d.waveHardSyMax),e,t,v(d.waveHardTimeMin,d.waveHardTimeMax),n,i,a,r,g(S.Double,S.Sixtuple))}throw new Error}(q=F||(F={}))[q.Up=0]="Up",q[q.Left=1]="Left",q[q.Right=2]="Right",q[q.Down=3]="Down",function(e){e[e.Straight=0]="Straight",e[e.Triangular=1]="Triangular",e[e.Circular=2]="Circular",e[e.Rectangular=3]="Rectangular"}(Y||(Y={})),(O=D||(D={}))[O.Easy=0]="Easy",O[O.Medium=1]="Medium",O[O.Hard=2]="Hard";let U=0,z=1;function Q(e){z++;let t=D.Easy;z>3&&z<=6&&(t=D.Medium),z>6&&(t=D.Hard),e.entities=X(t).enemies,e.deadCount=0,U=0}function L(e){z=1,Q(e)}function $(e,t){e.dead=!0,t.deadCount++}const V={up:!1,down:!1,left:!1,right:!1,space:!1,shift:!1};function j(e){let t=!0;return()=>V[e]&&t?(t=!1,!0):(V[e]||(t=!0),!1)}onkeydown=onkeyup=e=>function(e,t){38!=e&&90!=e&&87!=e||(V.up=t);39!=e&&68!=e||(V.right=t);40!=e&&83!=e||(V.down=t);37!=e&&65!=e&&81!=e||(V.left=t);16==e&&(V.shift=t);32==e&&(V.space=t)}(e.keyCode,null!=e.type[5]);let G,J,K,N=null,Z=(...e)=>{let t=N.createBufferSource(),n=N.createBuffer(e.length,e[0].length,te);return e.map(((e,t)=>n.getChannelData(t).set(e))),t.buffer=n,t.connect(N.destination),t.start(),t},_=(e=1,t=.05,n=220,i=0,a=0,r=.1,l=0,u=1,o=0,d=0,s=0,h=0,y=0,c=0,p=0,x=0,M=0,f=1,w=0,m=0)=>{let v,g,b=2*Math.PI,S=o*=500*b/te**2,H=(0<p?1:-1)*b/4,P=n*=(1+2*t*Math.random()-t)*b/te,R=[],T=0,E=0,B=0,A=1,C=0,W=0,F=0;for(d*=500*b/te**3,p*=b/te,s*=b/te,h*=te,y=te*y|0,g=(i=99+te*i)+(w*=te)+(a*=te)+(r*=te)+(M*=te)|0;B<g;R[B++]=F)++W%(100*x|0)||(F=l?1<l?2<l?3<l?Math.sin((T%b)**3):Math.max(Math.min(Math.tan(T),1),-1):1-(2*T/b%2+2)%2:1-4*Math.abs(Math.round(T/b)-T/b):Math.sin(T),F=(y?1-m+m*Math.sin(2*Math.PI*B/y):1)*(0<F?1:-1)*Math.abs(F)**u*e*ee*(B<i?B/i:B<i+w?1-(B-i)/w*(1-f):B<i+w+a?f:B<g-M?(g-B-M)/r*f:0),F=M?F/2+(M>B?0:(B<g-M?1:(g-B)/M)*R[B-M|0]/2):F),v=(n+=o+=d)*Math.sin(E*p-H),T+=v-v*c*(1-1e9*(Math.sin(B)+1)%2),E+=v-v*c*(1-1e9*(Math.sin(B)**2+1)%2),A&&++A>h&&(n+=s,P+=s,A=0),!y||++C%y||(n=P,o=S,A=A||1);return R},ee=.3,te=44100,ne=(e,t,n,i=125)=>{let a,r,l,u,o,d,s,h,y,c,p,x,M,f,w,m=0,v=[],g=[],b=[],S=0,H=0,P=1,R={},T=te/i*60>>2;for(;P;S++)v=[P=h=p=M=0],n.map(((i,p)=>{for(s=t[i][S]||[0,0,0],P|=!!t[i][S],w=M+(t[i][0].length-2-!h)*T,f=p==n.length-1,r=2,u=M;r<s.length+f;h=++r){for(o=s[r],y=r==s.length+f-1&&f||c!=(s[0]||0)|o|0,l=0;l<T&&h;l++>T-99&&y&&(x+=(x<1)/99))d=(1-x)*v[m++]/2||0,g[u]=(g[u]||0)-d*H+d,b[u]=(b[u++]||0)+d*H+d;o&&(x=o%1,H=s[1]||0,(o|=0)&&(v=R[[c=s[m=0]||0,o]]=R[[c,o]]||(a=[...e[c]],a[2]*=2**((o-12)/12),o>0?_(...a):[])))}M=w}));return[g,b]},ie=[[[,0,261,,,2,2,,,,,,,,,,.01],[,0,32,.05,,.2,3,5],[3,0,43,,,.25,,,,,,,,2],[1.6,0,655,,,,3,1.65,,,,,.02,3.8,-.1,,.2],[,0,232,.01,.09,.15,2,,,,,,154.87,,,,.26]],[[[,,4,,,,,,3,,,,,,,,,,,,,,,,,,,,,,,,,,4,,,,,,3,,,,,,,,,,,,,,,,,,,,,,3,,,,],[,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,,,,,,,,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,10,,,,,,10,,,,,,,,,,,,,,,,,,,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[2,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,],[3,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[4,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,,,,,,,,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,22,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[2,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,],[3,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,,,]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[4,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,,,,,,,,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,22,,,,,,,,],[,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,16,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[4,,,,,,,,,,,,,,30,29,30,29,,,,,18,17,18,17,,,,,,,,,,,,,,,,,,,,,30,29,30,29,,,,,18,17,18,17,15,,,,,,,,],[3,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,13]],[[,,4,,,,,,3,,,,,,,,,,3,,3,,3,,3,,3,,3,,3,,,,4,,,,,,3,,,,,,,,,,4,,3,,3,,3,,3,,3,,3,,,,],[4,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,,,,,,,,,,,,,,,,,,,,,25,24,25,24,,,,,25,24,25,24,22,,,,,,,,],[4,,13,13,13,13,13,13,12,12,12,12,12,12,12,,,,12,12,12,12,,,,,12,12,12,12,12,12,12,12,13,13,13,13,13,13,10,10,10,10,10,10,,,,,10,10,10,10,,,,,,10,10,10,10,10,10,10],[1,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,3,,],[4,,,,,,,,,,,,,,30,29,30,29,,,,,18,17,18,17,,,,,,,,,,,,,,,,,,,,,30,29,30,29,,,,,18,17,18,17,15,,,,,,,,],[3,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,,,,,,13,,,,,,,,13,,,,,,,,13,,,,,,,,13,,13,13]]],[0,1,1,2,2,3,3,4,4,5,5,3,3,4,4,5,5,2,2],135,undefined],ae=[[[.5,0,128,,.08,.5,3],[.8,0,32,,.07,.11,2,0,,,.5,.01],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.9,0,32,,,.35,3,2]],[[[1,,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,15,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,21],[,,15,,20,15,,18,,,,,,,21,16,15,,15,,20,15,,20,,,,,,,23,18,15,,],[2,,,,,,,,,,13,13,13,13,,,,,,,,,,,,,1,1,1,1,,,,,]],[[1,,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,15,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,21],[,,15,,20,15,,18,,,,,,,21,16,15,,15,,20,15,,20,,,,,,,23,18,15,,],[2,,,,,,,,,,13,13,13,13,,,,,,,,,,,,,1,1,1,1,,,,,],[3,,20,,,,20,,,,20,,,,20,,15,,13,,,,13,,,,13,,,,13,,16,,]],[[1,,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,15,13,13,15,13,13,13,15,16,13,13,15,13,13,13,16,21]]],[2,2,0,0,1,0,1,0,1,0],80],re=[[[1.5,0,130,,,.5,,,,,,,,,,,,.15,.6],[,0,130,.01,.09,.15,2,,,,,,154.87,,,,.26],[1.4,0,32,,,.25,3,5]],[[[,,24,,,,20,,,,17,,,,13,,,,10,,,,10,,,,10,,,,10,,,,13,,,,17,,,,20,,,,24,,,,10,,,,10,,,,10,,,,13,,,,],[1,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,10,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,13,,],[,,36,32,34,,,,,,29,25,27,,,,,,22,,,,22,,,,,,,,,,,,22,25,24,,,,,,29,32,30,,,,,,25,,,,25,,,,25,,,,25,,,,],[2,,12,,12,,12,,12,,12,,12,,12,,12,,10,,10,,10,,10,,10,,10,,10,,10,,12,,12,,12,,12,,12,,12,,12,,12,,10,,10,,10,,10,,10,,10,,10,,5,,]],[[,,24,,,,20,,,,17,,,,13,,,,10,,,,10,,,,10,,,,10,,,,13,,,,17,,,,20,,,,24,,,,10,,,,10,,,,10,,,,13,,,,],[1,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,10,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,13,,],[,,36,32,34,,,,,,29,25,27,,,,,,22,,,,22,,,,,,,,,,,,22,25,24,,,,,,29,32,30,,,,,,25,,,,25,,,,25,,,,25,,,,]],[[,,24,,,,20,,,,17,,,,13,,,,10,,,,10,,,,10,,,,10,,,,13,,,,17,,,,20,,,,24,,,,10,,,,10,,,,10,,,,13,,,,],[,,36,32,34,,,,,,29,25,27,,,,,,22,,,,22,,,,,,,,,,,,22,25,24,,,,,,29,32,30,,,,,,25,,,,25,,,,25,,,,25,,,,]],[[,,24,,,,20,,,,17,,,,13,,,,10,,,,10,,,,10,,,,10,,,,13,,,,17,,,,20,,,,24,,,,10,,,,10,,,,10,,,,13,,,,],[1,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,10,,24,20,22,18,20,17,18,15,17,13,15,12,13,10,12,8,10,10,,,10,10,,,10,10,,,10,,13,,]]],[2,3,3,1,1,0,0,0,0,0,0],120];const le=j("space"),ue=j("shift");let oe,de=!1,se=!1;function he(e){let t=0,n=0;E(e.bullets),V.left&&(t+=-d.playerSpeedX),V.right&&(t+=d.playerSpeedX),V.up&&(n+=-d.playerSpeedY),V.down&&(n+=d.playerSpeedY),le()&&function(e){null!=e.bullets.bullets.find((e=>!e.isActive))&&(T(e.bullets,e.dx+d.playerBulletSpeedX,c(e,y(d.playerWidth,d.playerHeight/2)),e.bulletsPattern),e.bulletsPattern+=1,e.bulletsPattern%=S.ConicEnd)}(e),e.dx=t,e.dy=n,se||(N=new window.AudioContext,J=ne(...re),G=[ne(...ie),ne(...ae)],se=!0),se&&ue()&&(de?K.stop():(N?.resume(),K=Z(...G[g(0,1)]),K.loop=!0),de=!de),e.x+=e.dx*d.delta,e.y+=e.dy*d.delta,e.x<=0&&(e.x=0),e.x>=d.width-d.playerWidth&&(e.x=d.width-d.playerWidth),e.y<=0&&(e.y=0),e.y>=d.height-d.playerHeight&&(e.y=d.height-d.playerHeight)}function ye(e){e.x=d.playerWidth,e.y=d.height/2,e.dx=0,e.dy=0}function ce(e,t){const n=Me(pe(e),pe(t)),i=Me(xe(e),xe(t));return null==n||null==i?null:{x:n.x,y:i.x,w:n.y-n.x,h:i.y-i.x}}function pe(e){return{x:e.x,y:e.x+e.w}}function xe(e){return{x:e.y,y:e.y+e.h}}function Me(e,t){return e.y<=t.x||t.y<=e.x?null:{x:Math.max(e.x,t.x),y:Math.min(e.y,t.y)}}var fe;(fe=oe||(oe={}))[fe.Speed=0]="Speed",fe[fe.Shield=1]="Shield",fe[fe.Multishot=2]="Multishot";let we=0,me=0,ve=0;window.onPowerUpChanged=function(e,t){e==oe.Speed&&(we+=t),e==oe.Shield&&(me+=t),e==oe.Multishot&&(ve+=t),we<0&&(we=0),me<0&&(me=0),ve<0&&(ve=0),function(){const e=u("current-speed"),t=u("current-shield"),n=u("current-multishot");if(null==e||null==t||null==n)return;e.innerText=we.toString(),t.innerText=me.toString(),n.innerText=ve.toString()}()};let ge=d.engineTimeResolution,be=performance.now(),Se=be;const He={x:d.playerWidth,dx:0,y:d.height/2,dy:0,w:d.playerWidth,h:d.playerHeight,bullets:P(d.playerBulletsPoolSize,d.playerBulletSpeedX,d.playerBulletSpeedY,d.playerSprayOpen),bulletsPattern:S.Single},Pe=function(){const e=`#${b()}`;return{x:.5*d.width-d.bossWidth/2,y:.5*d.height-d.bossHeight/2,w:d.bossWidth,h:d.bossHeight,dx:0,dy:0,color:e,bullets:P(d.bossBulletsPoolSize,d.bossBulletSpeedX,d.bossBulletSpeedY,d.bossSprayOpen),elapsedTime:0,currentPattern:C,shootElapsedTime:0,newPatternTime:0,shootCount:0,targetReached:!1,patternIndex:0,repeatCount:0}}(),Re={entities:X(D.Easy).enemies,deadCount:0},Te={canvas:s(d.width,d.height,"gameCanvas")};function Ee(){he(He),function(e){E(e.bullets),e.elapsedTime+=d.delta,e.shootElapsedTime+=d.delta;const i=d.bossSpeed;if(0!=e.newPatternTime){if(!(e.elapsedTime>=e.newPatternTime))return;e.newPatternTime=0,e.currentPattern==A?e.currentPattern=C:e.currentPattern==C?e.currentPattern=W:e.currentPattern==W&&(e.currentPattern=A)}if(e.targetReached?(e.y>.9*d.height-d.bossHeight||e.y<.1*d.height)&&(e.dy*=-1):(e.x>e.currentPattern.tx?e.dx=-i:e.x<e.currentPattern.tx&&(e.dx=i),e.y>e.currentPattern.ty?e.dy=-i:e.y<e.currentPattern.ty&&(e.dy=i)),e.x+=e.dx*d.delta,e.y+=e.dy*d.delta,e.targetReached)if(e.shootCount<e.currentPattern.shootCount[e.patternIndex])e.shootElapsedTime>=1/e.currentPattern.shootFrequency[e.patternIndex]&&(e.shootCount+=1,e.shootElapsedTime=0,null!=e.currentPattern.shootPattern[e.patternIndex]&&T(e.bullets,e.dx-e.currentPattern.shootSpeed[e.patternIndex],c(e,y(0,d.bossHeight/2)),e.currentPattern.shootPattern[e.patternIndex],e.currentPattern.shootRandom[e.patternIndex]));else if(e.shootCount=0,e.bullets.lastRandY=0,e.patternIndex+1==e.currentPattern.shootFrequency.length){if(e.patternIndex=0,e.repeatCount+1==e.currentPattern.repeat)return e.repeatCount=0,e.targetReached=!1,void(e.newPatternTime=e.elapsedTime+e.currentPattern.waitTime);e.repeatCount+=1,e.currentPattern.resetPosOnRepeat&&(e.targetReached=!1)}else e.patternIndex+=1;else if(!(t(e.x)!=e.currentPattern.tx&&n(e.x)!=e.currentPattern.tx||t(e.y)!=e.currentPattern.ty&&n(e.y)!=e.currentPattern.ty))e.targetReached=!0,e.dx=e.currentPattern.dx,e.dy=e.currentPattern.dy}(Pe),function(e,t){for(let n of function(e){return e.entities.filter((e=>!e.dead))}(t)){for(let i of e.bullets.bullets)null!=ce(n,i)&&(f(i),$(n,t));for(let i of n.bullets.bullets)null!=ce(e,i)&&(L(t),ye(e));null!=ce(e,n)&&(ye(e),L(t))}}(He,Re)}!function e(n){window.requestAnimationFrame((t=>e(t)));var i,a,r=0;n>be+ge&&(r=t((n-be)/ge));for(var l=0;l<r;l++)be+=ge,Ee();(function({canvas:e}){e.clearRect(0,0,d.width,d.height)})(Te),function(e,t){h(e,t);for(let n of t.bullets.bullets)n.isActive&&x(e,n)}(Te,He),B(i=Te,(a=Pe).bullets),h(i,a,a.color),Se=n}(0);